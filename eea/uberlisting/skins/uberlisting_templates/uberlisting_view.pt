<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      lang="en"
      metal:use-macro="here/main_template/macros/master"
      i18n:domain="eea">

<body>
    <metal:content-core fill-slot="content-core">
        <metal:content define-macro="content-core">
        <metal:block use-macro="context/folder_listing/macros/content-core">
            <metal:entries fill-slot="entries">

            <metal:listing define-macro="listing" tal:define="smartView nocall:context/@@uberlisting_view_logic;
                templates smartView/getAvailableTemplateNames;
                portal_url portal_url|context/@@plone_portal_state/portal_url;
                ">
                <ul id="smart-view-switch" class="eea-horizontal-list eea-no-list-style eea-rounded-corners" tal:define="templateName smartView/getTemplateName">
                    <tal:template_images repeat="template templates"  tal:condition="templates"> 
                        <li tal:define="templateId python:template[0]; img python:templateId + '.png'" 
                             tal:condition="python:exists('context/%s' % img)">
                             <a tal:attributes="href string:${templateId}; data-templateId templateId">
                                <img i18n:attributes="title;" tal:attributes="src python: portal_url + '/' + templateId + '.png'; title python:template[1]" />
                            </a>
                        </li>
                    </tal:template_images>
                    <tal:template_no_images repeat="template templates"  tal:condition="templates"> 
                        <li tal:define="templateId python:template[0]; img python:templateId + '.png'" 
                             tal:condition="python:not exists('context/%s' % img)">
                            <a tal:attributes="href string:${templateId}; data-templateId templateId" tal:content="python:template[1]" />
                        </li>
                    </tal:template_no_images>
                </ul>
                <div id="smart-view-content">
                    <metal:block metal:use-macro="smartView/getListingMacro" />
                </div>
            </metal:listing>

            </metal:entries>
        </metal:block>

    </metal:content>
    </metal:content-core>
</body>
</html>


